{"remainingRequest":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\babel-loader\\lib\\index.js!D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ZJNU\\SoftwareProject\\x-admin-web\\src\\views\\test\\test5.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\src\\views\\test\\test5.vue","mtime":1701656784603},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\babel.config.js","mtime":1701656787248},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCnZhciBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTsKaW1wb3J0IFJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2aWRlb1N0cmVhbTogbnVsbCwKICAgICAgYXZhdGFyOiAnaHR0cDovL2xvY2FsaG9zdDo5OTk5L2ZpbGUvZTlmNjhhZmFhNDRlNDcyYzhhN2MyYTQ2YWYwNGFhYzkuanBnJywKICAgICAgcGlwZWlsdjogMAogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnN0YXJ0Q2FtZXJhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdGFydENhbWVyYTogZnVuY3Rpb24gc3RhcnRDYW1lcmEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsKICAgICAgICB2aWRlbzogdHJ1ZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChzdHJlYW0pIHsKICAgICAgICBfdGhpcy52aWRlb1N0cmVhbSA9IHN0cmVhbTsKICAgICAgICBfdGhpcy4kcmVmcy52aWRlby5zcmNPYmplY3QgPSBzdHJlYW07CiAgICAgICAgLy8g5byA5aeL5pKt5pS+6KeG6aKRCiAgICAgICAgX3RoaXMuJHJlZnMudmlkZW8ucGxheSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIHN0YXJ0UmVjb2duaXRpb246IGZ1bmN0aW9uIHN0YXJ0UmVjb2duaXRpb24oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKCiAgICAgIC8vIOiuvue9rmNhbnZhc+eahOWuvemrmOWSjOinhumikea1geWuvemrmOS4gOiHtAogICAgICBjYW52YXMud2lkdGggPSB0aGlzLiRyZWZzLnZpZGVvLnZpZGVvV2lkdGg7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSB0aGlzLiRyZWZzLnZpZGVvLnZpZGVvSGVpZ2h0OwogICAgICAvLyDnu5jliLbop4bpopHluKfliLBjYW52YXMKICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLiRyZWZzLnZpZGVvLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAvLyDojrflj5bmiKrlj5bnmoTop4bpopHluKfnmoRiYXNlNjQgZGF0YSBVUkwKICAgICAgdmFyIGZyYW1lRGF0YVVybCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpOwogICAgICAvLyDlnKjmjqfliLblj7DmiZPljbDmiKrlj5bnmoTop4bpopHluKfnmoRkYXRhIFVSTAogICAgICBjb25zb2xlLmxvZyhmcmFtZURhdGFVcmwpOwogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJiYXNlNjQiLCBmcmFtZURhdGFVcmwpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImxvY2FsSW1hZ2VVcmwiLCB0aGlzLmF2YXRhcik7CgogICAgICAvLyDlnKjov5nph4znvJblhpnkurrohLjor4bliKvnmoTpgLvovpEKICAgICAgUmVxdWVzdC5wb3N0KCcvdmlkZW8vdG9yZW5saWFuc2hpYmllJywgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcy5zcGxpdCgnIycpKTsKICAgICAgICB2YXIgcmVzcyA9IHJlcy5zcGxpdCgnIycpOwogICAgICAgIF90aGlzMi5waXBlaWx2ID0gcmVzc1sxXTsKICAgICAgICBpZiAocmVzc1swXSA9PT0gJ3RydWUnKSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAi5oGt5Zac5L2g77yM5Lq66IS46K+G5Yir5oiQ5Yqf5ZWm77yB77yBIiwKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKICAgICAgICAgIG5ld0VsZW1lbnQudGV4dENvbnRlbnQgPSAn5oGt5Zac5L2g77yM5Lq66IS46K+G5Yir5oiQ5Yqf5ZWm77yB77yB77yBJzsKICAgICAgICAgIG5ld0VsZW1lbnQuc3R5bGUgPSAiY29sb3I6IGdyZWVuIjsKICAgICAgICAgIF90aGlzMi4kcmVmcy50aXNpLmFwcGVuZENoaWxkKG5ld0VsZW1lbnQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UuZXJyb3IoJ+W+iOmBl+aGvu+8jOS6uuiEuOivhuWIq+Wksei0pe+8jOivt+mHjeaWsOmdouWQkeaRhOWDj+WktOivhuWIq++8ge+8ge+8gScpOwogICAgICAgICAgbmV3RWxlbWVudC50ZXh0Q29udGVudCA9ICflvojpgZfmhr7vvIzkurrohLjor4bliKvlpLHotKXvvIzor7fph43mlrDpnaLlkJHmkYTlg4/lpLTor4bliKvvvIHvvIHvvIEnOwogICAgICAgICAgbmV3RWxlbWVudC5zdHlsZSA9ICJjb2xvcjogcmVkIjsKICAgICAgICAgIF90aGlzMi4kcmVmcy50aXNpLmFwcGVuZENoaWxkKG5ld0VsZW1lbnQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc3RvcFJlY29nbml0aW9uOiBmdW5jdGlvbiBzdG9wUmVjb2duaXRpb24oKSB7CiAgICAgIC8vIOWcqOi/memHjOe8luWGmeWBnOatouS6uuiEuOivhuWIq+eahOmAu+i+kQogICAgICB0aGlzLnZpZGVvU3RyZWFtLmdldFRyYWNrcygpWzBdLnN0b3AoKTsKICAgIH0sCiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlcykgewogICAgICBjb25zb2xlLmxvZygi5rWL6K+V54Wn54mHIiArIHJlcyk7CiAgICAgIHRoaXMuYXZhdGFyID0gcmVzOwogICAgfSAvLyBjb250aW51ZVJlY29nbml0aW9uKCl7CiAgICAvLyAgICAgdmFyIGkgPSAwOwogICAgLy8gICAgIHdoaWxlIChpIDwgNTApewogICAgLy8KICAgIC8vICAgICB9CiAgICAvLyB9CiAgfQp9Ow=="},{"version":3,"names":["newElement","document","createElement","Request","axios","data","videoStream","avatar","pipeilv","mounted","startCamera","methods","_this","navigator","mediaDevices","getUserMedia","video","then","stream","$refs","srcObject","play","catch","error","console","log","startRecognition","_this2","canvas","ctx","getContext","width","videoWidth","height","videoHeight","drawImage","frameDataUrl","toDataURL","formData","FormData","append","post","res","split","ress","$message","message","type","textContent","style","tisi","appendChild","stopRecognition","getTracks","stop","handleAvatarSuccess"],"sources":["src/views/test/test5.vue"],"sourcesContent":["<template>\n  <div style=\"position: relative;\">\n    <div>\n      <h1 style=\"text-align: center;color: #42b983\">人脸识别</h1>\n      <h2 style=\"color: #42b983;position: absolute;top: 50px;left: 120px;\">摄像头拍摄</h2>\n      <video style=\"width: 400px;height: 400px;\" ref=\"video\" autoplay></video>\n    </div>\n    <el-button type=\"primary\" @click=\"startRecognition\">点击识别</el-button>\n<!--    <el-button type=\"success\" @click=\"continueRecognition\">持续识别</el-button>-->\n    <el-button type=\"danger\" @click=\"stopRecognition\">停止识别</el-button>\n    <div style=\"width: 400px;height: 300px;border: red 1px solid;position: absolute;right: 0px;top: 100px;\" >\n       <img style=\"width: 100%;height: 100%;\" :src=\"avatar\">\n    </div>\n\n    <h2 style=\"position: absolute;right: 120px;top: 50px;color: #42b983\">上传本地图片</h2>\n    <el-upload style=\"display: inline-block; margin-left: 10px\"\n               action=\"http://localhost:9999/file/upload\"\n               :show-file-list=\"false\"\n               :accept=\"'jpg'\"\n               :on-success=\"handleAvatarSuccess\"\n    >\n      <el-button style=\"position: absolute;right: 150px;top: 450px;\" type=\"primary\">上传图片</el-button>\n    </el-upload>\n    <h2 style=\"position: absolute;right: 47%;bottom: -50px;color: #42b983\">对比结果</h2>\n    <div ref=\"tisi\" style=\"position: absolute;width: 400px;height: 200px;border: #1482f0 2px solid;right: 37.5%;bottom: -250px\">\n        <h3 style=\"color: orangered\">匹配率：{{pipeilv}}</h3>\n    </div>\n  </div>\n</template>\n<script>\nconst newElement = document.createElement('h2');\nimport Request from \"@/utils/request\";\nimport axios from \"axios\";\nexport default {\n\n  data() {\n    return {\n      videoStream: null,\n      avatar: 'http://localhost:9999/file/e9f68afaa44e472c8a7c2a46af04aac9.jpg',\n      pipeilv: 0\n    };\n  },\n  mounted() {\n    this.startCamera();\n  },\n  methods: {\n    startCamera() {\n      navigator.mediaDevices\n        .getUserMedia({video: true})\n        .then((stream) => {\n          this.videoStream = stream;\n          this.$refs.video.srcObject = stream;\n          // 开始播放视频\n          this.$refs.video.play();\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    startRecognition() {\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n\n      // 设置canvas的宽高和视频流宽高一致\n      canvas.width = this.$refs.video.videoWidth;\n      canvas.height = this.$refs.video.videoHeight;\n      // 绘制视频帧到canvas\n      ctx.drawImage(this.$refs.video, 0, 0, canvas.width, canvas.height);\n      // 获取截取的视频帧的base64 data URL\n      const frameDataUrl = canvas.toDataURL('image/png');\n      // 在控制台打印截取的视频帧的data URL\n      console.log(frameDataUrl)\n      let formData = new FormData();\n      formData.append(\"base64\", frameDataUrl);\n      formData.append(\"localImageUrl\",this.avatar)\n\n      // 在这里编写人脸识别的逻辑\n      Request.post('/video/torenlianshibie', formData).then(res => {\n        console.log(res.split('#'))\n        var ress = res.split('#');\n        this.pipeilv = ress[1];\n        if (ress[0] === 'true'){\n          this.$message({\n            message: \"恭喜你，人脸识别成功啦！！\",\n            type: 'success'\n          });\n          newElement.textContent = '恭喜你，人脸识别成功啦！！！';\n          newElement.style=\"color: green\";\n          this.$refs.tisi.appendChild(newElement);\n        }else {\n          this.$message.error('很遗憾，人脸识别失败，请重新面向摄像头识别！！！');\n          newElement.textContent = '很遗憾，人脸识别失败，请重新面向摄像头识别！！！';\n          newElement.style=\"color: red\";\n          this.$refs.tisi.appendChild(newElement);\n        }\n      })\n    },\n    stopRecognition() {\n      // 在这里编写停止人脸识别的逻辑\n      this.videoStream.getTracks()[0].stop();\n    },\n    handleAvatarSuccess(res) {\n      console.log(\"测试照片\"+res)\n      this.avatar= res\n    },\n    // continueRecognition(){\n    //     var i = 0;\n    //     while (i < 50){\n    //\n    //     }\n    // }\n  },\n};\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,IAAAA,UAAA,GAAAC,QAAA,CAAAC,aAAA;AACA,OAAAC,OAAA;AACA,OAAAC,KAAA;AACA;EAEAC,IAAA,WAAAA,KAAA;IACA;MACAC,WAAA;MACAC,MAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,WAAA;EACA;EACAC,OAAA;IACAD,WAAA,WAAAA,YAAA;MAAA,IAAAE,KAAA;MACAC,SAAA,CAAAC,YAAA,CACAC,YAAA;QAAAC,KAAA;MAAA,GACAC,IAAA,WAAAC,MAAA;QACAN,KAAA,CAAAN,WAAA,GAAAY,MAAA;QACAN,KAAA,CAAAO,KAAA,CAAAH,KAAA,CAAAI,SAAA,GAAAF,MAAA;QACA;QACAN,KAAA,CAAAO,KAAA,CAAAH,KAAA,CAAAK,IAAA;MACA,GACAC,KAAA,WAAAC,KAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;MACA;IACA;IACAG,gBAAA,WAAAA,iBAAA;MAAA,IAAAC,MAAA;MACA,IAAAC,MAAA,GAAA3B,QAAA,CAAAC,aAAA;MACA,IAAA2B,GAAA,GAAAD,MAAA,CAAAE,UAAA;;MAEA;MACAF,MAAA,CAAAG,KAAA,QAAAZ,KAAA,CAAAH,KAAA,CAAAgB,UAAA;MACAJ,MAAA,CAAAK,MAAA,QAAAd,KAAA,CAAAH,KAAA,CAAAkB,WAAA;MACA;MACAL,GAAA,CAAAM,SAAA,MAAAhB,KAAA,CAAAH,KAAA,QAAAY,MAAA,CAAAG,KAAA,EAAAH,MAAA,CAAAK,MAAA;MACA;MACA,IAAAG,YAAA,GAAAR,MAAA,CAAAS,SAAA;MACA;MACAb,OAAA,CAAAC,GAAA,CAAAW,YAAA;MACA,IAAAE,QAAA,OAAAC,QAAA;MACAD,QAAA,CAAAE,MAAA,WAAAJ,YAAA;MACAE,QAAA,CAAAE,MAAA,uBAAAjC,MAAA;;MAEA;MACAJ,OAAA,CAAAsC,IAAA,2BAAAH,QAAA,EAAArB,IAAA,WAAAyB,GAAA;QACAlB,OAAA,CAAAC,GAAA,CAAAiB,GAAA,CAAAC,KAAA;QACA,IAAAC,IAAA,GAAAF,GAAA,CAAAC,KAAA;QACAhB,MAAA,CAAAnB,OAAA,GAAAoC,IAAA;QACA,IAAAA,IAAA;UACAjB,MAAA,CAAAkB,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;UACA/C,UAAA,CAAAgD,WAAA;UACAhD,UAAA,CAAAiD,KAAA;UACAtB,MAAA,CAAAR,KAAA,CAAA+B,IAAA,CAAAC,WAAA,CAAAnD,UAAA;QACA;UACA2B,MAAA,CAAAkB,QAAA,CAAAtB,KAAA;UACAvB,UAAA,CAAAgD,WAAA;UACAhD,UAAA,CAAAiD,KAAA;UACAtB,MAAA,CAAAR,KAAA,CAAA+B,IAAA,CAAAC,WAAA,CAAAnD,UAAA;QACA;MACA;IACA;IACAoD,eAAA,WAAAA,gBAAA;MACA;MACA,KAAA9C,WAAA,CAAA+C,SAAA,MAAAC,IAAA;IACA;IACAC,mBAAA,WAAAA,oBAAAb,GAAA;MACAlB,OAAA,CAAAC,GAAA,UAAAiB,GAAA;MACA,KAAAnC,MAAA,GAAAmC,GAAA;IACA,EACA;IACA;IACA;IACA;IACA;IACA;EACA;AACA"}]}