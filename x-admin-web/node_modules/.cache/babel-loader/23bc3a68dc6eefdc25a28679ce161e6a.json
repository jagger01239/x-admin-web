{"remainingRequest":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\babel-loader\\lib\\index.js!D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ZJNU\\SoftwareProject\\x-admin-web\\src\\views\\sys\\Person.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\src\\views\\sys\\Person.vue","mtime":1701656784226},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\babel.config.js","mtime":1701656787248},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgovLyBpbXBvcnQge3NlcnZlcklwfSBmcm9tICIuLi8uLi9wdWJsaWMvY29uZmlnIjsKaW1wb3J0IHVzZXJBcGkgZnJvbSAiLi4vLi4vYXBpL3VzZXJNYW5hZ2UiOwppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlBlcnNvbiIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHt9LAogICAgICBpZDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oImlkIikgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpZCIpKSA6IDAKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRVc2VyQnlJZCh0aGlzLmlkKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFVzZXJCeUlkOiBmdW5jdGlvbiBnZXRVc2VyQnlJZChpZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB1c2VyQXBpLmdldFVzZXJCeUlkKGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT0gJzIwMDAwJykgewogICAgICAgICAgX3RoaXMuZm9ybSA9IHJlcy5kYXRhOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2F2ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMucmVxdWVzdC5wb3N0KCIvdXNlci9zYXZlIiwgdGhpcy5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT0gJzIwMDAwJykgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1lc3NhZ2UpOwogICAgICAgICAgLy8g5pu05paw5rWP6KeI5Zmo5a2Y5YKo55qE55So5oi35L+h5oGvCiAgICAgICAgICB1c2VyQXBpLmdldFVzZXJCeUlkKF90aGlzMi5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIHJlcy50b2tlbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXIiKSkudG9rZW47CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyIiwgSlNPTi5zdHJpbmdpZnkocmVzKSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJsb2NhbHN0b3JhZ2Ug5pu05paw5oiQ5Yqf5ZWmIik7CiAgICAgICAgICB9KTsKICAgICAgICAgIC8v6Kem5Y+R54i257qn5pu05pawVXNlcueahOaWueazlQogICAgICAgICAgLy8gdGhpcy4kZW1pdCgicmVmcmVzaFVzZXIiKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQXZhdGFyU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlQXZhdGFyU3VjY2VzcyhyZXMpIHsKICAgICAgY29uc29sZS5sb2coIua1i+ivleeFp+eJhyIgKyByZXMpOwogICAgICB0aGlzLmZvcm0uYXZhdGFyID0gcmVzOwogICAgfQogIH0KfTs="},{"version":3,"names":["userApi","request","name","data","form","id","localStorage","getItem","JSON","parse","created","getUserById","methods","_this","then","res","code","save","_this2","post","$message","success","message","token","setItem","stringify","console","log","error","handleAvatarSuccess","avatar"],"sources":["src/views/sys/Person.vue"],"sourcesContent":["<template>\n  <el-card style=\"width: 500px;\">\n    <el-form label-width=\"80px\" size=\"small\">\n      <el-upload\n          class=\"avatar-uploader\"\n          :action=\"'http://localhost:9999/file/upload'\"\n          :show-file-list=\"false\"\n          :on-success=\"handleAvatarSuccess\"\n      >\n        <img v-if=\"form.avatar\" :src=\"form.avatar\" class=\"avatar\">\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n      </el-upload>\n      <el-form-item label=\"用户名\">\n        <el-input v-model=\"form.username\" disabled autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"邮箱\">\n        <el-input v-model=\"form.email\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"电话\">\n        <el-input v-model=\"form.phone\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"密码\">\n        <el-input v-model=\"form.password\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n<!--      <el-form-item label=\"地址\">-->\n<!--        <el-input type=\"textarea\" v-model=\"form.address\" autocomplete=\"off\"></el-input>-->\n<!--      </el-form-item>-->\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n      </el-form-item>\n    </el-form>\n  </el-card>\n</template>\n\n<script>\n// import {serverIp} from \"../../public/config\";\nimport userApi from \"../../api/userManage\"\nimport request from \"@/utils/request\";\nexport default {\n  name: \"Person\",\n  data() {\n    return {\n      form: {},\n      id: localStorage.getItem(\"id\") ? JSON.parse(localStorage.getItem(\"id\")) : 0,\n    }\n  },\n  created() {\n    this.getUserById(this.id)\n  },\n  methods: {\n    getUserById(id) {\n      userApi.getUserById(id).then(res =>{\n        if (res.code == '20000'){\n          this.form = res.data\n        }\n      })\n    },\n    save() {\n      this.request.post(\"/user/save\", this.form).then(res => {\n        if (res.code == '20000') {\n          this.$message.success(res.message)\n          // 更新浏览器存储的用户信息\n          userApi.getUserById(this.id).then(res => {\n            res.token = JSON.parse(localStorage.getItem(\"user\")).token\n            localStorage.setItem(\"user\", JSON.stringify(res))\n            console.log(\"localstorage 更新成功啦\")\n          })\n          //触发父级更新User的方法\n          // this.$emit(\"refreshUser\")\n        } else {\n          this.$message.error(res.message)\n        }\n      })\n    },\n    handleAvatarSuccess(res) {\n      console.log(\"测试照片\"+res)\n      this.form.avatar= res\n    }\n  }\n}\n</script>\n\n<style>\n.avatar-uploader {\n  text-align: center;\n  padding-bottom: 10px;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 138px;\n  height: 138px;\n  line-height: 138px;\n  text-align: center;\n}\n.avatar {\n  width: 138px;\n  height: 138px;\n  display: block;\n}\n</style>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA,OAAAA,OAAA;AACA,OAAAC,OAAA;AACA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;MACAC,EAAA,EAAAC,YAAA,CAAAC,OAAA,SAAAC,IAAA,CAAAC,KAAA,CAAAH,YAAA,CAAAC,OAAA;IACA;EACA;EACAG,OAAA,WAAAA,QAAA;IACA,KAAAC,WAAA,MAAAN,EAAA;EACA;EACAO,OAAA;IACAD,WAAA,WAAAA,YAAAN,EAAA;MAAA,IAAAQ,KAAA;MACAb,OAAA,CAAAW,WAAA,CAAAN,EAAA,EAAAS,IAAA,WAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACAH,KAAA,CAAAT,IAAA,GAAAW,GAAA,CAAAZ,IAAA;QACA;MACA;IACA;IACAc,IAAA,WAAAA,KAAA;MAAA,IAAAC,MAAA;MACA,KAAAjB,OAAA,CAAAkB,IAAA,oBAAAf,IAAA,EAAAU,IAAA,WAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACAE,MAAA,CAAAE,QAAA,CAAAC,OAAA,CAAAN,GAAA,CAAAO,OAAA;UACA;UACAtB,OAAA,CAAAW,WAAA,CAAAO,MAAA,CAAAb,EAAA,EAAAS,IAAA,WAAAC,GAAA;YACAA,GAAA,CAAAQ,KAAA,GAAAf,IAAA,CAAAC,KAAA,CAAAH,YAAA,CAAAC,OAAA,UAAAgB,KAAA;YACAjB,YAAA,CAAAkB,OAAA,SAAAhB,IAAA,CAAAiB,SAAA,CAAAV,GAAA;YACAW,OAAA,CAAAC,GAAA;UACA;UACA;UACA;QACA;UACAT,MAAA,CAAAE,QAAA,CAAAQ,KAAA,CAAAb,GAAA,CAAAO,OAAA;QACA;MACA;IACA;IACAO,mBAAA,WAAAA,oBAAAd,GAAA;MACAW,OAAA,CAAAC,GAAA,UAAAZ,GAAA;MACA,KAAAX,IAAA,CAAA0B,MAAA,GAAAf,GAAA;IACA;EACA;AACA"}]}