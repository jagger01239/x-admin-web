{"remainingRequest":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ZJNU\\SoftwareProject\\x-admin-web\\src\\views\\test\\test1.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\src\\views\\test\\test1.vue","mtime":1701656784392},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmaWxlQXBpIGZyb20gIkAvYXBpL2ZpbGVNYW5hZ2UiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtTGFiZWxXaWR0aDogIjEzMHB4IiwKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICB0aXRsZTogIiIsCiAgICAgIHRvdGFsOiAwLAogICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10sCiAgICAgIHNlYXJjaE1vZGVsOiB7CiAgICAgICAgcGFnZU5vOiAxLAogICAgICAgIHBhZ2VTaXplOiA1LAogICAgICB9LAogICAgICBmaWxlTGlzdDogW10sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZGVsQmF0Y2goKXsKICAgICAgbGV0IGlkcyA9IHRoaXMubXVsdGlwbGVTZWxlY3Rpb24ubWFwKHYgPT4gdi5pZCkgIC8vIFt7fSwge30sIHt9XSA9PiBbMSwyLDNdCiAgICAgIHRoaXMuJGNvbmZpcm0oYOaCqOehruiupOWIoOmZpOaWh+S7tiAke2lkc30gP2AsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IGZpbGVBcGkuZGVsQmF0Y2goaWRzKS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgIGlmIChyZXMuY29kZSA9PSAnMjAwMDAnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuaJuemHj+WIoOmZpOaIkOWKnyIpCiAgICAgICAgICB0aGlzLmdldEZpbGVMaXN0KCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5om56YeP5Yig6Zmk5aSx6LSlIikKICAgICAgICAgIHRoaXMuZ2V0RmlsZUxpc3QoKQogICAgICAgIH0KICAgICAgfSkpCiAgICB9LAogICAgY2hhbmdlRW5hYmxlKHJvdyl7CiAgICAgIGZpbGVBcGkudXBkYXRlRmlsZShyb3cpLnRoZW4ocmVzcG9uc2UgPT57CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMjAwMDApewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgbWVzc2FnZTogIuS/ruaUueaIkOWKn+WVpu+8gSIKICAgICAgICAgIH0pCiAgICAgICAgfWVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLkv67mlLnlpLHotKXllabvvIEiCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBkb3dubG9hZCh1cmwpewogICAgICB3aW5kb3cub3Blbih1cmwpOwogICAgfSwKICAgIGhhbmRsZUltcG9ydFN1Y2Nlc3MoKXsKICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgIG1lc3NhZ2U6ICLlr7zlhaXmiJDlip/llabvvIEiCiAgICAgIH0pCiAgICAgIHRoaXMuZ2V0RmlsZUxpc3QoKTsKICAgIH0sCiAgICBkZWxldGVGaWxlKHJvdyl7CiAgICAgIHRoaXMuJGNvbmZpcm0oYOaCqOehruiupOWIoOmZpOaWh+S7tiAke3Jvdy5uYW1lfSA/YCwgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIGZpbGVBcGkuZGVsZXRlRmlsZUJ5SWQocm93LmlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1lc3NhZ2UKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5nZXRGaWxlTGlzdCgpOwogICAgICAgIH0pOwoKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZShwYWdlU2l6ZSkgewogICAgICB0aGlzLnNlYXJjaE1vZGVsLnBhZ2VTaXplID0gcGFnZVNpemU7CiAgICAgIHRoaXMuZ2V0RmlsZUxpc3QoKTsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHBhZ2VObykgewogICAgICB0aGlzLnNlYXJjaE1vZGVsLnBhZ2VObyA9IHBhZ2VObzsKICAgICAgdGhpcy5nZXRGaWxlTGlzdCgpOwogICAgfSwKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpewogICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uID0gdmFsCiAgICB9LAogICAgZ2V0RmlsZUxpc3QoKSB7CiAgICAgIGZpbGVBcGkuZ2V0RmlsZUxpc3QodGhpcy5zZWFyY2hNb2RlbCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLmZpbGVMaXN0ID0gcmVzcG9uc2UuZGF0YS5yZWNvcmRzOwogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsOwogICAgICB9KTsKICAgIH0sCiAgICBwcmV2aWV3KHVybCkgewogICAgICB3aW5kb3cub3BlbignaHR0cDovL2xvY2FsaG9zdDo4MDEyL29ubGluZVByZXZpZXc/dXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmJ0b2EoKHVybCkpKSkKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRGaWxlTGlzdCgpOwogIH0sCn07Cgo="},{"version":3,"sources":["test1.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"test1.vue","sourceRoot":"src/views/test","sourcesContent":["<template>\n  <div>\n    <!-- 搜索栏 -->\n    <el-card id=\"search\">\n      <el-row>\n        <el-col :span=\"20\">\n          <el-input\n            v-model=\"searchModel.name\"\n            placeholder=\"文件名\"\n            clearable>\n          </el-input>\n          <el-button\n            @click=\"getFileList\"\n            type=\"primary\"\n            round\n            icon=\"el-icon-search\">查询\n          </el-button>\n          <el-button\n            @click=\"delBatch\"\n            type=\"danger\"\n            round\n            icon=\"el-icon-delete-solid\">批量删除\n          </el-button>\n\n          <el-upload style=\"display: inline-block; margin-left:15px\"\n                     action=\"http://localhost:9999/file/upload\"\n                     :show-file-list=\"false\"\n                     :on-success=\"handleImportSuccess\">\n            <el-button\n              type=\"success\"\n              round\n              icon=\"el-icon-plus\">新增文件\n            </el-button>\n          </el-upload>\n        </el-col>\n      </el-row>\n    </el-card>\n\n\n    <!-- 结果列表 -->\n    <el-card>\n      <el-table :data=\"fileList\"  @selection-change=\"handleSelectionChange\" stripe style=\"width: 100%\">\n        <el-table-column type=\"selection\"  width=\"55\">\n        </el-table-column>\n        <el-table-column prop=\"id\" label=\"文件ID\" width=\"180\">\n        </el-table-column>\n        <el-table-column prop=\"name\" label=\"文件名\" width=\"180\">\n        </el-table-column>\n        <el-table-column prop=\"type\" label=\"文件类型\" width=\"180\">\n        </el-table-column>\n        <el-table-column prop=\"size\" label=\"文件大小(kb)\" width=\"180\">\n        </el-table-column>\n        <el-table-column label=\"下载\">\n          <template slot-scope=\"scope\">\n             <el-button type=\"primary\" @click=\"download(scope.row.url)\">下载</el-button>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"预览\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"warning\" @click=\"preview(scope.row.url)\">预览</el-button>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"启用\">\n            <template slot-scope=\"scope\">\n                <el-switch v-model=\"scope.row.enable\" active-color=\"#13ce66\" inactive-color=\"#CCC\" @change=\"changeEnable(scope.row)\"></el-switch>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"180\">\n          <template slot-scope=\"scope\">\n            <el-button @click=\"deleteFile(scope.row)\" type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" circle></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n\n    <!-- 分页组件 -->\n    <el-pagination\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :current-page=\"searchModel.pageNo\"\n      :page-sizes=\"[5, 10, 20, 50]\"\n      :page-size=\"searchModel.pageSize\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :total=\"total\"\n    >\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nimport fileApi from \"@/api/fileManage\";\n\nexport default {\n  data() {\n    return {\n      formLabelWidth: \"130px\",\n      dialogFormVisible: false,\n      title: \"\",\n      total: 0,\n      multipleSelection: [],\n      searchModel: {\n        pageNo: 1,\n        pageSize: 5,\n      },\n      fileList: [],\n    };\n  },\n  methods: {\n    delBatch(){\n      let ids = this.multipleSelection.map(v => v.id)  // [{}, {}, {}] => [1,2,3]\n      this.$confirm(`您确认删除文件 ${ids} ?`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => fileApi.delBatch(ids).then(res => {\n        console.log(res)\n        if (res.code == '20000') {\n          this.$message.success(\"批量删除成功\")\n          this.getFileList()\n        } else {\n          this.$message.error(\"批量删除失败\")\n          this.getFileList()\n        }\n      }))\n    },\n    changeEnable(row){\n      fileApi.updateFile(row).then(response =>{\n        if (response.code == 20000){\n          this.$message({\n            type: \"success\",\n            message: \"修改成功啦！\"\n          })\n        }else {\n          this.$message({\n            type: \"error\",\n            message: \"修改失败啦！\"\n          })\n        }\n      })\n    },\n    download(url){\n      window.open(url);\n    },\n    handleImportSuccess(){\n      this.$message({\n        type: 'success',\n        message: \"导入成功啦！\"\n      })\n      this.getFileList();\n    },\n    deleteFile(row){\n      this.$confirm(`您确认删除文件 ${row.name} ?`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        fileApi.deleteFileById(row.id).then(response => {\n          this.$message({\n            type: 'success',\n            message: response.message\n          });\n          this.getFileList();\n        });\n\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    handleSizeChange(pageSize) {\n      this.searchModel.pageSize = pageSize;\n      this.getFileList();\n    },\n    handleCurrentChange(pageNo) {\n      this.searchModel.pageNo = pageNo;\n      this.getFileList();\n    },\n    handleSelectionChange(val){\n      this.multipleSelection = val\n    },\n    getFileList() {\n      fileApi.getFileList(this.searchModel).then((response) => {\n        this.fileList = response.data.records;\n        this.total = response.data.total;\n      });\n    },\n    preview(url) {\n      window.open('http://localhost:8012/onlinePreview?url=' + encodeURIComponent(window.btoa((url))))\n    },\n  },\n  created() {\n    this.getFileList();\n  },\n};\n\n</script>\n\n<style>\n#search .el-input {\n  width: 200px;\n  margin-right: 10px;\n}\n.el-dialog .el-input {\n  width: 85%;\n}\n</style>\n"]}]}