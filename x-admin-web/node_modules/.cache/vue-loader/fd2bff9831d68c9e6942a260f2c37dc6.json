{"remainingRequest":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ZJNU\\SoftwareProject\\x-admin-web\\src\\views\\sys\\Person.vue?vue&type=style&index=0&id=1ad1eb11&lang=css&","dependencies":[{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\src\\views\\sys\\Person.vue","mtime":1701656784226},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYXZhdGFyLXVwbG9hZGVyIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgcGFkZGluZy1ib3R0b206IDEwcHg7Cn0KLmF2YXRhci11cGxvYWRlciAuZWwtdXBsb2FkIHsKICBib3JkZXI6IDFweCBkYXNoZWQgI2Q5ZDlkOTsKICBib3JkZXItcmFkaXVzOiA2cHg7CiAgY3Vyc29yOiBwb2ludGVyOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBvdmVyZmxvdzogaGlkZGVuOwp9Ci5hdmF0YXItdXBsb2FkZXIgLmVsLXVwbG9hZDpob3ZlciB7CiAgYm9yZGVyLWNvbG9yOiAjNDA5RUZGOwp9Ci5hdmF0YXItdXBsb2FkZXItaWNvbiB7CiAgZm9udC1zaXplOiAyOHB4OwogIGNvbG9yOiAjOGM5MzlkOwogIHdpZHRoOiAxMzhweDsKICBoZWlnaHQ6IDEzOHB4OwogIGxpbmUtaGVpZ2h0OiAxMzhweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLmF2YXRhciB7CiAgd2lkdGg6IDEzOHB4OwogIGhlaWdodDogMTM4cHg7CiAgZGlzcGxheTogYmxvY2s7Cn0K"},{"version":3,"sources":["Person.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Person.vue","sourceRoot":"src/views/sys","sourcesContent":["<template>\n  <el-card style=\"width: 500px;\">\n    <el-form label-width=\"80px\" size=\"small\">\n      <el-upload\n          class=\"avatar-uploader\"\n          :action=\"'http://localhost:9999/file/upload'\"\n          :show-file-list=\"false\"\n          :on-success=\"handleAvatarSuccess\"\n      >\n        <img v-if=\"form.avatar\" :src=\"form.avatar\" class=\"avatar\">\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n      </el-upload>\n      <el-form-item label=\"用户名\">\n        <el-input v-model=\"form.username\" disabled autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"邮箱\">\n        <el-input v-model=\"form.email\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"电话\">\n        <el-input v-model=\"form.phone\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"密码\">\n        <el-input v-model=\"form.password\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n<!--      <el-form-item label=\"地址\">-->\n<!--        <el-input type=\"textarea\" v-model=\"form.address\" autocomplete=\"off\"></el-input>-->\n<!--      </el-form-item>-->\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n      </el-form-item>\n    </el-form>\n  </el-card>\n</template>\n\n<script>\n// import {serverIp} from \"../../public/config\";\nimport userApi from \"../../api/userManage\"\nimport request from \"@/utils/request\";\nexport default {\n  name: \"Person\",\n  data() {\n    return {\n      form: {},\n      id: localStorage.getItem(\"id\") ? JSON.parse(localStorage.getItem(\"id\")) : 0,\n    }\n  },\n  created() {\n    this.getUserById(this.id)\n  },\n  methods: {\n    getUserById(id) {\n      userApi.getUserById(id).then(res =>{\n        if (res.code == '20000'){\n          this.form = res.data\n        }\n      })\n    },\n    save() {\n      this.request.post(\"/user/save\", this.form).then(res => {\n        if (res.code == '20000') {\n          this.$message.success(res.message)\n          // 更新浏览器存储的用户信息\n          userApi.getUserById(this.id).then(res => {\n            res.token = JSON.parse(localStorage.getItem(\"user\")).token\n            localStorage.setItem(\"user\", JSON.stringify(res))\n            console.log(\"localstorage 更新成功啦\")\n          })\n          //触发父级更新User的方法\n          // this.$emit(\"refreshUser\")\n        } else {\n          this.$message.error(res.message)\n        }\n      })\n    },\n    handleAvatarSuccess(res) {\n      console.log(\"测试照片\"+res)\n      this.form.avatar= res\n    }\n  }\n}\n</script>\n\n<style>\n.avatar-uploader {\n  text-align: center;\n  padding-bottom: 10px;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 138px;\n  height: 138px;\n  line-height: 138px;\n  text-align: center;\n}\n.avatar {\n  width: 138px;\n  height: 138px;\n  display: block;\n}\n</style>\n"]}]}