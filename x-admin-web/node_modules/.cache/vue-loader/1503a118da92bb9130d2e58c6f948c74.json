{"remainingRequest":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ZJNU\\SoftwareProject\\x-admin-web\\src\\views\\sys\\Person.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\src\\views\\sys\\Person.vue","mtime":1701656784226},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ZJNU\\SoftwareProject\\x-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCB7c2VydmVySXB9IGZyb20gIi4uLy4uL3B1YmxpYy9jb25maWciOwppbXBvcnQgdXNlckFwaSBmcm9tICIuLi8uLi9hcGkvdXNlck1hbmFnZSIKaW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQZXJzb24iLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7fSwKICAgICAgaWQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpZCIpID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiaWQiKSkgOiAwLAogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0VXNlckJ5SWQodGhpcy5pZCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFVzZXJCeUlkKGlkKSB7CiAgICAgIHVzZXJBcGkuZ2V0VXNlckJ5SWQoaWQpLnRoZW4ocmVzID0+ewogICAgICAgIGlmIChyZXMuY29kZSA9PSAnMjAwMDAnKXsKICAgICAgICAgIHRoaXMuZm9ybSA9IHJlcy5kYXRhCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHNhdmUoKSB7CiAgICAgIHRoaXMucmVxdWVzdC5wb3N0KCIvdXNlci9zYXZlIiwgdGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09ICcyMDAwMCcpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubWVzc2FnZSkKICAgICAgICAgIC8vIOabtOaWsOa1j+iniOWZqOWtmOWCqOeahOeUqOaIt+S/oeaBrwogICAgICAgICAgdXNlckFwaS5nZXRVc2VyQnlJZCh0aGlzLmlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHJlcy50b2tlbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXIiKSkudG9rZW4KICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXIiLCBKU09OLnN0cmluZ2lmeShyZXMpKQogICAgICAgICAgICBjb25zb2xlLmxvZygibG9jYWxzdG9yYWdlIOabtOaWsOaIkOWKn+WVpiIpCiAgICAgICAgICB9KQogICAgICAgICAgLy/op6blj5HniLbnuqfmm7TmlrBVc2Vy55qE5pa55rOVCiAgICAgICAgICAvLyB0aGlzLiRlbWl0KCJyZWZyZXNoVXNlciIpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUF2YXRhclN1Y2Nlc3MocmVzKSB7CiAgICAgIGNvbnNvbGUubG9nKCLmtYvor5XnhafniYciK3JlcykKICAgICAgdGhpcy5mb3JtLmF2YXRhcj0gcmVzCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Person.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Person.vue","sourceRoot":"src/views/sys","sourcesContent":["<template>\n  <el-card style=\"width: 500px;\">\n    <el-form label-width=\"80px\" size=\"small\">\n      <el-upload\n          class=\"avatar-uploader\"\n          :action=\"'http://localhost:9999/file/upload'\"\n          :show-file-list=\"false\"\n          :on-success=\"handleAvatarSuccess\"\n      >\n        <img v-if=\"form.avatar\" :src=\"form.avatar\" class=\"avatar\">\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n      </el-upload>\n      <el-form-item label=\"用户名\">\n        <el-input v-model=\"form.username\" disabled autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"邮箱\">\n        <el-input v-model=\"form.email\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"电话\">\n        <el-input v-model=\"form.phone\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"密码\">\n        <el-input v-model=\"form.password\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n<!--      <el-form-item label=\"地址\">-->\n<!--        <el-input type=\"textarea\" v-model=\"form.address\" autocomplete=\"off\"></el-input>-->\n<!--      </el-form-item>-->\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n      </el-form-item>\n    </el-form>\n  </el-card>\n</template>\n\n<script>\n// import {serverIp} from \"../../public/config\";\nimport userApi from \"../../api/userManage\"\nimport request from \"@/utils/request\";\nexport default {\n  name: \"Person\",\n  data() {\n    return {\n      form: {},\n      id: localStorage.getItem(\"id\") ? JSON.parse(localStorage.getItem(\"id\")) : 0,\n    }\n  },\n  created() {\n    this.getUserById(this.id)\n  },\n  methods: {\n    getUserById(id) {\n      userApi.getUserById(id).then(res =>{\n        if (res.code == '20000'){\n          this.form = res.data\n        }\n      })\n    },\n    save() {\n      this.request.post(\"/user/save\", this.form).then(res => {\n        if (res.code == '20000') {\n          this.$message.success(res.message)\n          // 更新浏览器存储的用户信息\n          userApi.getUserById(this.id).then(res => {\n            res.token = JSON.parse(localStorage.getItem(\"user\")).token\n            localStorage.setItem(\"user\", JSON.stringify(res))\n            console.log(\"localstorage 更新成功啦\")\n          })\n          //触发父级更新User的方法\n          // this.$emit(\"refreshUser\")\n        } else {\n          this.$message.error(res.message)\n        }\n      })\n    },\n    handleAvatarSuccess(res) {\n      console.log(\"测试照片\"+res)\n      this.form.avatar= res\n    }\n  }\n}\n</script>\n\n<style>\n.avatar-uploader {\n  text-align: center;\n  padding-bottom: 10px;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 138px;\n  height: 138px;\n  line-height: 138px;\n  text-align: center;\n}\n.avatar {\n  width: 138px;\n  height: 138px;\n  display: block;\n}\n</style>\n"]}]}